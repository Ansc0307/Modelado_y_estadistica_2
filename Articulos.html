<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulaci칩n de Tienda</title>
  <link rel="stylesheet" href="css/tienda.css">
</head>
<body>
   <nav>
    <a href="index.html">Inicio</a>
     <a href="Interes.html">Interes Fijo</a>
    <a href="InteresVar.html">Interes Variable</a>
    <a href="Dados.html">Dados</a>
    <a href="Articulos.html">Tienda</a>
    <a href="Huevos.html">Huevos</a>
    <a href="Azucar.html">Az칰car</a>
  </nav>


  <h1>游낅 Simulaci칩n de Tienda </h1>
    <main class="container">
  <div class="container">
    <!-- Panel de entrada -->
     
   <div class="panel">
  <h2>丘뙖잺 Par치metros</h2>

  <div class="input-group">
    <label for="simulations">N춿 simulaciones</label>
    <input type="number" id="simulations" min="1" value="50" required>
    
  </div>

  <div class="input-group">
    <label for="hours">N춿 horas</label>
    <input type="number" id="hours" min="1" value="10" required>
  </div>

  <div class="input-group">
    <label for="costFixed">Costo fijo diario (Bs)</label>
    <input type="number" id="costFixed" min="1" value="300" required>
  </div>

  <div class="input-group">
    <label for="costArticle">Costo por art칤culo (Bs)</label>
    <input type="number" id="costArticle" min="1" value="50" required>
  </div>

  <div class="input-group">
    <label for="priceArticle">Precio de venta por art칤culo (Bs)</label>
    <input type="number" id="priceArticle" min="1" value="75" required>
  </div>

  <h3>Probabilidades de compra de art칤culos <small>(deben sumar 1)</small></h3>

  <div class="row">
    <div class="input-group">
      <label for="p0">Art칤culos 0</label>
      <input type="number" step="0.01" id="p0" value="0.2" min="0" max="1" required>
    </div>
    <div class="input-group">
      <label for="p1">Art칤culos 1</label>
      <input type="number" step="0.01" id="p1" value="0.3" min="0" max="1" required>
    </div>
  </div>

  <div class="row">
    <div class="input-group">
      <label for="p2">Art칤culos 2</label>
      <input type="number" step="0.01" id="p2" value="0.4" min="0" max="1" required>
    </div>
    <div class="input-group">
      <label for="p3">Art칤culos 3</label>
      <input type="number" step="0.01" id="p3" value="0.1" min="0" max="1" required>
    </div>
  </div>

  <div class="btn-group">
    <button id="simulate">Simular</button>
    <button id="clear">Limpiar</button>
  </div>
</div>

    
    <!-- Panel de resultados -->
    <div class="table-container">
        <h2>游늶 Resultados</h2>
      <div class="scroll">
        <table id="resultsTable">
          <thead>
            <tr>
              <th>Simulaci칩n</th>
              <th>Ganancia neta (Bs)</th>
              <th>Art칤culos vendidos</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div id="summary" class="summary-box" style="display: none;">
  <h2><span class="icon">游늵</span> Promedios Generales</h2>
  <p>Ganancia neta promedio: <strong>0 Bs</strong></p>
  <p>Art칤culos vendidos promedio: <strong>0</strong></p>
</div>


    </div>
  </div>
</main>
   <footer>춸 2025 - Simulaci칩n de Articulos de Tienda</footer>

  <script>
    function simulateOnce(hours, costFixed, costArticle, priceArticle, probs) {
      let totalArticles = 0;
      const profitPerArticle = priceArticle - costArticle;

      for (let h = 0; h < hours; h++) {
        // Llegadas uniformes entre 0 y 4
        const arrivals = Math.round(Math.random() * 4);

        for (let i = 0; i < arrivals; i++) {
          const r = Math.random();
          let articles = 0;
          if (r < probs[0]) articles = 0;
          else if (r < probs[0] + probs[1]) articles = 1;
          else if (r < probs[0] + probs[1] + probs[2]) articles = 2;
          else articles = 3;

          totalArticles += articles;
        }
      }

      const netGain = totalArticles * profitPerArticle - costFixed;
      return { netGain, totalArticles };
    }

    document.getElementById("simulate").addEventListener("click", () => {
      /*const hours = parseInt(document.getElementById("hours").value);
      const simulations = parseInt(document.getElementById("simulations").value);*/
      const sStr = document.getElementById("simulations").value;
  const hStr = document.getElementById("hours").value;
      const costFixed = parseFloat(document.getElementById("costFixed").value);
      const costArticle = parseFloat(document.getElementById("costArticle").value);
      const priceArticle = parseFloat(document.getElementById("priceArticle").value);
      const probs = [
        parseFloat(document.getElementById("p0").value),
        parseFloat(document.getElementById("p1").value),
        parseFloat(document.getElementById("p2").value),
        parseFloat(document.getElementById("p3").value)
      ];

      const simulations = Number(sStr);
  const hours = Number(hStr);

      // Validaciones
      if (isNaN(hours) || isNaN(simulations) || isNaN(costFixed) || isNaN(costArticle) || isNaN(priceArticle) || probs.some(p => isNaN(p))) {
        alert("丘멆잺 Todos los campos deben ser llenados con n칰meros.");
        return;
      }
      if (hours <= 1 || simulations <= 1 || costFixed <= 0 || costArticle <= 0 || priceArticle <= 0) {
        alert("丘멆잺 Todos los valores deben ser positivos.(La canitdad de simulaciones y horas debe ser mayor q 0)");
        return;
      }
      if (!Number.isInteger(hours) || !Number.isInteger(simulations)) {
        alert("丘멆잺 Las horas y simulaciones deben ser enteros.");
        return;
      }
      const probSum = probs.reduce((a,b) => a+b, 0);
      if (Math.abs(probSum - 1) > 0.001) {
        alert("丘멆잺 La suma de probabilidades debe ser igual a 1.");
        return;
      }

      // Simulaci칩n
      const tbody = document.querySelector("#resultsTable tbody");
      tbody.innerHTML = "";
      let totalNet = 0, totalArticles = 0;

      for (let s = 1; s <= simulations; s++) {
        const { netGain, totalArticles: articles } = simulateOnce(hours, costFixed, costArticle, priceArticle, probs);
        totalNet += netGain;
        totalArticles += articles;

        const row = `<tr>
          <td>${s}</td>
          <td>${netGain}</td>
          <td>${articles}</td>
        </tr>`;
        tbody.insertAdjacentHTML("beforeend", row);
      }

      // Promedios
      const avgNet = (totalNet / simulations).toFixed(2);
      const avgArticles = (totalArticles / simulations).toFixed(2);
      
      const summaryDiv = document.getElementById("summary");
summaryDiv.style.display = "block";
summaryDiv.innerHTML = `
  <h2><span class="icon">游늵</span> Promedios Generales</h2>
  <p>Ganancia neta promedio: <strong>${avgNet} Bs</strong></p>
  <p>Art칤culos vendidos promedio: <strong>${avgArticles}</strong></p>
`;




    });

    document.getElementById("clear").addEventListener("click", () => {
      document.querySelectorAll("input").forEach(input => input.value = "");
      document.querySelector("#resultsTable tbody").innerHTML = "";
      document.getElementById("summary").textContent =
        "Promedios: Ganancia Neta = 0, Art칤culos Vendidos = 0";
    });
  </script>
</body>
</html>
