<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulación Juego de Dados</title>
  <link rel="stylesheet" href="css/dados.css">
</head>
<body>
<nav>
    <a href="index.html">Inicio</a>
     <a href="Interes.html">Interes Fijo</a>
    <a href="InteresVar.html">Interes Variable</a>
    <a href="Dados.html">Dados</a>
    <a href="Articulos.html">Tienda</a>
    <a href="Huevos.html">Huevos</a>
    <a href="Azucar.html">Azúcar</a>
  </nav>

  <h1>🎲 Simulación Juego de Dados</h1>
  
  <div class="contenedor">
    <!-- Columna izquierda: formulario -->
    <div class="card">
      <h2>⚙️ Parámetros</h2>
      <label>Número de simulaciones:</label>
      <input type="number" id="simulaciones" min="1" value="5">
      
      <label>Número de juegos por simulación:</label>
      <input type="number" id="numJuegos" min="1" value="10">
      
      <label>Precio del juego (Bs.):</label>
      <input type="number" id="precio" min="1" value="2">
      
      <label>Pérdida de la casa si gana el jugador (Bs.):</label>
      <input type="number" id="premio" min="1" value="5">

      <div class="botones">
        <button class="btn-simular" onclick="simular()">Simular</button>
        <button class="btn-limpiar" onclick="limpiar()">Limpiar</button>
      </div>
    </div>

    <!-- Columna derecha: tabla -->
    <div class="card">
      <h2>📋 Resultados</h2>
      <div class="tabla-scroll" id="tablaResultados">
        <table>
          <thead>
            <tr>
              <th>Simulación</th>
              <th>Ganancia Neta Casa (Bs.)</th>
              <th>Juegos Ganados Casa</th>
              <th>% Juegos Ganados Casa</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4">Sin datos aún</td></tr>
          </tbody>
        </table>
      </div>
      <div id="promediosGenerales" class="resultado" style="display:none;"></div>
    </div>
  </div>

     <footer>
    2025 Generadores Numeros Aleatorios - Ayana Siegle
  </footer>

  <script>
    function validarInputs(simulaciones, juegos, precio, premio) {
      if (simulaciones <= 1 || juegos <= 1 || precio <= 0 || premio <= 0) {
        alert("⚠️ Todos los valores deben ser números positivos.(La canitdad de simulaciones y juegos debe ser mayor q 0)");
        return false;
      }
      if (!Number.isInteger(simulaciones) || !Number.isInteger(juegos)) {
        alert("⚠️ El número de simulaciones y juegos debe ser entero.");
        return false;
      }
      if ( isNaN(simulaciones) || isNaN(precio) || isNaN(premio) || isNaN(juegos)) {
        alert("⚠️ Todos los campos deben ser llenados con números.");
        return false;
      }
      return true;
    }

    function lanzarDados() {
      let dado1 = Math.floor(Math.random() * 6) + 1;
      let dado2 = Math.floor(Math.random() * 6) + 1;
      return dado1 + dado2;
    }

    function simular() {
      /*const simulaciones = parseInt(document.getElementById("simulaciones").value);
      const juegos = parseInt(document.getElementById("numJuegos").value);*/
      const sStr = document.getElementById("simulaciones").value;
  const jStr = document.getElementById("numJuegos").value;
      const precio = parseFloat(document.getElementById("precio").value);
      const premio = parseFloat(document.getElementById("premio").value);
        const simulaciones = Number(sStr);
  const juegos = Number(jStr);

      if (!validarInputs(simulaciones, juegos, precio, premio)) return;

      let resultados = [];
      let sumaGanancia = 0, sumaGanados = 0, sumaPorcentaje = 0;

      for (let i = 1; i <= simulaciones; i++) {
        let gananciaCasa = 0;
        let juegosGanadosCasa = 0;

        for (let j = 0; j < juegos; j++) {
          gananciaCasa += precio;
          let suma = lanzarDados();
          if (suma === 7) {
            gananciaCasa -= premio;
          } else {
            juegosGanadosCasa++;
          }
        }

        let porcentajeGanados = (juegosGanadosCasa / juegos) * 100;

        resultados.push({
          simulacion: i,
          ganancia: gananciaCasa,
          ganados: juegosGanadosCasa,
          porcentaje: porcentajeGanados.toFixed(2)
        });

        sumaGanancia += gananciaCasa;
        sumaGanados += juegosGanadosCasa;
        sumaPorcentaje += porcentajeGanados;
      }

      mostrarResultados(resultados, sumaGanancia, sumaGanados, sumaPorcentaje, simulaciones);
    }

    function mostrarResultados(resultados, sumaGanancia, sumaGanados, sumaPorcentaje, simulaciones) {
      let tabla = `<table>
        <thead>
          <tr>
            <th>Simulación</th>
            <th>Ganancia Neta Casa (Bs.)</th>
            <th>Juegos Ganados Casa</th>
            <th>% Juegos Ganados Casa</th>
          </tr>
        </thead><tbody>`;

      resultados.forEach(r => {
        tabla += `<tr>
          <td>${r.simulacion}</td>
          <td>${r.ganancia}</td>
          <td>${r.ganados}</td>
          <td>${r.porcentaje}%</td>
        </tr>`;
      });

      tabla += "</tbody></table>";
      document.getElementById("tablaResultados").innerHTML = tabla;

      let promedioGanancia = (sumaGanancia / simulaciones).toFixed(2);
      let promedioGanados = (sumaGanados / simulaciones).toFixed(2);
      let promedioPorcentaje = (sumaPorcentaje / simulaciones).toFixed(2);

      let resumen = `
        <h3>📊 Promedios Generales</h3>
        <p>Ganancia Neta Promedio: <b>${promedioGanancia} Bs.</b></p>
        <p>Juegos Ganados Promedio: <b>${promedioGanados}</b></p>
        <p>Porcentaje Promedio de Juegos Ganados: <b>${promedioPorcentaje}%</b></p>
      `;

      document.getElementById("promediosGenerales").innerHTML = resumen;
      document.getElementById("promediosGenerales").style.display = "block";
    }

    function limpiar() {
      document.getElementById("simulaciones").value = "";
      document.getElementById("numJuegos").value = "";
      document.getElementById("precio").value = "";
      document.getElementById("premio").value = "";
      document.getElementById("tablaResultados").innerHTML = `
        <table>
          <thead>
            <tr>
              <th>Simulación</th>
              <th>Ganancia Neta Casa (Bs.)</th>
              <th>Juegos Ganados Casa</th>
              <th>% Juegos Ganados Casa</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4">Sin datos aún</td></tr>
          </tbody>
        </table>`;
      document.getElementById("promediosGenerales").style.display = "none";
    }
  </script>
</body>
</html>
