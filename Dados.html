<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulaci√≥n Juego de Dados</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
      color: #333;
    }
    h1 {
      text-align: center;
      padding: 20px;
      color: #222;
    }

    /* Layout principal */
    .contenedor {
      display: flex;
      justify-content: center;
      gap: 20px;
      max-width: 1300px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Tarjetas base */
    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      flex: 1; /* ambas ocupan mismo espacio */
      min-width: 600px; /* nunca se encoje */
      display: flex;
      flex-direction: column;
    }

    /* Formulario */
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    input {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
    }
    .botones {
      margin-top: 20px;
      text-align: center;
    }
    button {
      padding: 12px 22px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.3s;
    }
    .btn-simular {
      background: #28a745;
      color: white;
    }
    .btn-simular:hover {
      background: #218838;
    }
    .btn-limpiar {
      background: #dc3545;
      color: white;
      margin-left: 10px;
    }
    .btn-limpiar:hover {
      background: #c82333;
    }

    /* Tabla */
    .tabla-scroll {
      flex: 1;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 100%; /* se mantiene ancho aunque est√© vac√≠a */
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
      font-size: 14px;
    }
    th {
      background: #007bff;
      color: white;
      position: sticky;
      top: 0;
      z-index: 1;
    }

    /* Promedios */
    .resultado {
      margin-top: 20px;
      padding: 15px;
      background: #fff3cd;
      border: 1px solid #ffeeba;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <h1>üé≤ Simulaci√≥n Juego de Dados</h1>
  
  <div class="contenedor">
    <!-- Columna izquierda: formulario -->
    <div class="card">
      <h2>‚öôÔ∏è Par√°metros</h2>
      <label>N√∫mero de simulaciones:</label>
      <input type="number" id="simulaciones" min="1" value="5">
      
      <label>N√∫mero de juegos por simulaci√≥n:</label>
      <input type="number" id="numJuegos" min="1" value="10">
      
      <label>Precio del juego (Bs.):</label>
      <input type="number" id="precio" min="1" value="2">
      
      <label>P√©rdida de la casa si gana el jugador (Bs.):</label>
      <input type="number" id="premio" min="1" value="5">

      <div class="botones">
        <button class="btn-simular" onclick="simular()">Simular</button>
        <button class="btn-limpiar" onclick="limpiar()">Limpiar</button>
      </div>
    </div>

    <!-- Columna derecha: tabla -->
    <div class="card">
      <h2>üìã Resultados</h2>
      <div class="tabla-scroll" id="tablaResultados">
        <table>
          <thead>
            <tr>
              <th>Simulaci√≥n</th>
              <th>Ganancia Neta Casa (Bs.)</th>
              <th>Juegos Ganados Casa</th>
              <th>% Juegos Ganados Casa</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4">Sin datos a√∫n</td></tr>
          </tbody>
        </table>
      </div>
      <div id="promediosGenerales" class="resultado" style="display:none;"></div>
    </div>
  </div>

  <script>
    function validarInputs(simulaciones, juegos, precio, premio) {
      if (simulaciones <= 0 || juegos <= 0 || precio <= 0 || premio <= 0) {
        alert("‚ö†Ô∏è Todos los valores deben ser n√∫meros positivos.");
        return false;
      }
      if (!Number.isInteger(simulaciones) || !Number.isInteger(juegos)) {
        alert("‚ö†Ô∏è El n√∫mero de simulaciones y juegos debe ser entero.");
        return false;
      }
      return true;
    }

    function lanzarDados() {
      let dado1 = Math.floor(Math.random() * 6) + 1;
      let dado2 = Math.floor(Math.random() * 6) + 1;
      return dado1 + dado2;
    }

    function simular() {
      const simulaciones = parseInt(document.getElementById("simulaciones").value);
      const juegos = parseInt(document.getElementById("numJuegos").value);
      const precio = parseFloat(document.getElementById("precio").value);
      const premio = parseFloat(document.getElementById("premio").value);

      if (!validarInputs(simulaciones, juegos, precio, premio)) return;

      let resultados = [];
      let sumaGanancia = 0, sumaGanados = 0, sumaPorcentaje = 0;

      for (let i = 1; i <= simulaciones; i++) {
        let gananciaCasa = 0;
        let juegosGanadosCasa = 0;

        for (let j = 0; j < juegos; j++) {
          gananciaCasa += precio;
          let suma = lanzarDados();
          if (suma === 7) {
            gananciaCasa -= premio;
          } else {
            juegosGanadosCasa++;
          }
        }

        let porcentajeGanados = (juegosGanadosCasa / juegos) * 100;

        resultados.push({
          simulacion: i,
          ganancia: gananciaCasa,
          ganados: juegosGanadosCasa,
          porcentaje: porcentajeGanados.toFixed(2)
        });

        sumaGanancia += gananciaCasa;
        sumaGanados += juegosGanadosCasa;
        sumaPorcentaje += porcentajeGanados;
      }

      mostrarResultados(resultados, sumaGanancia, sumaGanados, sumaPorcentaje, simulaciones);
    }

    function mostrarResultados(resultados, sumaGanancia, sumaGanados, sumaPorcentaje, simulaciones) {
      let tabla = `<table>
        <thead>
          <tr>
            <th>Simulaci√≥n</th>
            <th>Ganancia Neta Casa (Bs.)</th>
            <th>Juegos Ganados Casa</th>
            <th>% Juegos Ganados Casa</th>
          </tr>
        </thead><tbody>`;

      resultados.forEach(r => {
        tabla += `<tr>
          <td>${r.simulacion}</td>
          <td>${r.ganancia}</td>
          <td>${r.ganados}</td>
          <td>${r.porcentaje}%</td>
        </tr>`;
      });

      tabla += "</tbody></table>";
      document.getElementById("tablaResultados").innerHTML = tabla;

      let promedioGanancia = (sumaGanancia / simulaciones).toFixed(2);
      let promedioGanados = (sumaGanados / simulaciones).toFixed(2);
      let promedioPorcentaje = (sumaPorcentaje / simulaciones).toFixed(2);

      let resumen = `
        <h3>üìä Promedios Generales</h3>
        <p>Ganancia Neta Promedio: <b>${promedioGanancia} Bs.</b></p>
        <p>Juegos Ganados Promedio: <b>${promedioGanados}</b></p>
        <p>Porcentaje Promedio de Juegos Ganados: <b>${promedioPorcentaje}%</b></p>
      `;

      document.getElementById("promediosGenerales").innerHTML = resumen;
      document.getElementById("promediosGenerales").style.display = "block";
    }

    function limpiar() {
      document.getElementById("simulaciones").value = "";
      document.getElementById("numJuegos").value = "";
      document.getElementById("precio").value = "";
      document.getElementById("premio").value = "";
      document.getElementById("tablaResultados").innerHTML = `
        <table>
          <thead>
            <tr>
              <th>Simulaci√≥n</th>
              <th>Ganancia Neta Casa (Bs.)</th>
              <th>Juegos Ganados Casa</th>
              <th>% Juegos Ganados Casa</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="4">Sin datos a√∫n</td></tr>
          </tbody>
        </table>`;
      document.getElementById("promediosGenerales").style.display = "none";
    }
  </script>
</body>
</html>
